# 894. æ‰€æœ‰å¯èƒ½çš„çœŸäºŒå‰æ ‘

> [894. æ‰€æœ‰å¯èƒ½çš„çœŸäºŒå‰æ ‘](https://leetcode.cn/problems/all-possible-full-binary-trees/)
>
> éš¾åº¦ï¼š<font color=orange>`Medium`</font>
>
> æ ‡ç­¾ï¼š`æ ‘` `é€’å½’` `è®°å¿†åŒ–æœç´¢` `åŠ¨æ€è§„åˆ’` `äºŒå‰æ ‘`

## é¢˜ç›®

<p>ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>n</code> ï¼Œè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å¯èƒ½å« <code>n</code> ä¸ªèŠ‚ç‚¹çš„ <strong>çœŸäºŒå‰æ ‘</strong> ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ç­”æ¡ˆä¸­æ¯æ£µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»ç¬¦åˆ <code>Node.val == 0</code> ã€‚</p>

<p>ç­”æ¡ˆçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€æ£µçœŸäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚ä½ å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›æœ€ç»ˆçš„çœŸäºŒå‰æ ‘åˆ—è¡¨<strong>ã€‚</strong></p>

<p><strong>çœŸäºŒå‰æ ‘</strong> æ˜¯ä¸€ç±»äºŒå‰æ ‘ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹æ°å¥½æœ‰ <code>0</code> æˆ– <code>2</code> ä¸ªå­èŠ‚ç‚¹ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<img alt="" src="https://s3-lc-upload.s3.amazonaws.com/uploads/2018/08/22/fivetrees.png" style="width: 700px; height: 400px;" />
<pre>
<strong>è¾“å…¥ï¼š</strong>n = 7
<strong>è¾“å‡ºï¼š</strong>[[0,0,0,null,null,0,0,null,null,0,0],[0,0,0,null,null,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,null,null,null,null,0,0],[0,0,0,0,0,null,null,0,0]]
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>n = 3
<strong>è¾“å‡ºï¼š</strong>[[0,0,0]]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= n &lt;= 20</code></li>
</ul>


--------------------

## é¢˜è§£

### æ–¹æ³•ä¸€ï¼šé€’å½’

**ä»£ç **

```java
class Solution {
    public List<TreeNode> allPossibleFBT(int n) {
        List<TreeNode> ans = new ArrayList<>();
        if ((n & 1) == 0) {
            return ans;
        }
        if (n == 1) {
            ans.add(new TreeNode(0));
            return ans;
        }
        for (int i = 1; i < n; i += 2) {
            for (TreeNode left : allPossibleFBT(i)) {
                for (TreeNode right : allPossibleFBT(n - 1 - i)) {
                    ans.add(new TreeNode(0, left, right));
                }
            }
        }
        return ans;
    }
}
```

### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’

å‚è€ƒï¼š[çµèŒ¶å±±è‰¾åºœçš„é¢˜è§£](https://leetcode.cn/problems/all-possible-full-binary-trees/solutions/2719981/dong-tai-gui-hua-pythonjavacgojsrust-by-u3waz)

**ä»£ç **

```java
class Solution {
    public List<TreeNode> allPossibleFBT(int n) {
        if ((n & 1) == 0) {
            return new ArrayList<>();
        }
        n = (n + 1) >> 1;
        List<TreeNode>[] dp = new List[n + 1];
        Arrays.setAll(dp, i -> new ArrayList<>());
        dp[1].add(new TreeNode(0));
        for (int i = 2; i <= n; i++) {
            for (int j = 1; j < i; j++) {
                for (TreeNode left : dp[j]) {
                    for (TreeNode right : dp[i - j]) {
                        dp[i].add(new TreeNode(0, left, right));
                    }
                }
            }
        }
        return dp[n];
    }
}
```

### æ–¹æ³•ä¸‰ï¼šè®°å¿†æœç´¢

**æ€è·¯**

å‚è€ƒï¼š

1. [åŠ›æ‰£å®˜æ–¹é¢˜è§£](https://leetcode.cn/problems/all-possible-full-binary-trees/solutions/3558/suo-you-ke-neng-de-man-er-cha-shu-by-leetcode)
2. [çµèŒ¶å±±è‰¾åºœçš„é¢˜è§£](https://leetcode.cn/problems/all-possible-full-binary-trees/solutions/2719981/dong-tai-gui-hua-pythonjavacgojsrust-by-u3waz)

**ä»£ç **

```java
class Solution {
    private static final List<TreeNode>[] memo = new List[11];

    public List<TreeNode> allPossibleFBT(int n) {
        if ((n & 1) == 0) {
            return new ArrayList<>();
        }
        n = (n + 1) >> 1;
        return dfs(n);
    }

    private List<TreeNode> dfs(int n) {
        if (memo[n] != null) {
            return memo[n];
        }
        List<TreeNode> res = new ArrayList<>();
        if (n == 1) {
            res.add(new TreeNode());
        } else {
            for (int i = 1; i < n; i++) {
                int j = n - i;
                for (TreeNode left : dfs(i)) {
                    for (TreeNode right : dfs(j)) {
                        res.add(new TreeNode(0, left, right));
                    }
                }
            }
        }
        return memo[n] = res;
    }
}
```



**å¤æ‚åº¦åˆ†æ**

åˆ†æä¸å‡ºæ¥ğŸ¥²
